<!doctype html>

<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Issues</title>
		<meta name="author" content="Fred Cook, Wiktor Majkowski">
        <link href="defaultStyle.css" type="text/css" rel="stylesheet" />
        <link href="issues.css" type="text/css" rel="stylesheet" />
	</head>
	<body>
        <nav id = "navigation">
			<table>
				<tr> 
					<td id="logo"> L</td>
					<td id="button"><a href="/"> Home </a></td>
				 	<td id="button"><a href="/staff"> Staff </a></td>
					<td id="button"><a href="/contacts"> Contacts </a></td>
					<td id="button"><a href="/issues"> Issues </a></td>
                    {{#if user}}
                        <a id="lr" href="/profileInfo">Profile</a>
                        <a id="lr" href="/logout">Log out |</a>
                    {{else}}   
                    	<a id="lr" href="/register">| Register</a> 
					    <a id="lr" href="/login">Login |</a>                        
                    {{/if}}
				</tr>
			</table>
		</nav>	
        <h1> Issues </h1>
        
        <article>
            <section>
                <table id = "tableSubmitted">
                    <tr>
                        <th id = "th">ID</th>
                        <th id = "th">Issue</th>
                        <th id = "th">Location</th>
                        <th id = "th">Status</th>
                        <th id = "th">Priority</th>
                    </tr>

                    {{#each tasks}}
                        <tr id="row">
                            <form action="/issues" method="post">
                            <td id = "td"><a href="/issue_details/{{this.id}}">{{this.id}}</a> </td>
                            <!--<input name ="id" value = {{this.id}} readonly type = "hidden">-->
                            <!--<td id = "td">{{this.id}}</td>-->
                            <td id = "td">{{this.issueType}}</td>
                            <td id = "td">{{this.location}}</td>
                            <td id = "td">{{this.status}}</td>
                            <td id = "td">{{this.priority}}</td>
                            <td><input name ="id" type="hidden" value = {{this.id}}></td>
                            <td style="width:60px"><input style="float:left" type="submit" value="Details" name="details"></td>
                            </form>
                        </tr>
                    {{/each}}
                    <section id="filter">
                        <dt>
                            <dd>Filter</dd>
                            <dd>
                                <input placeholder="Issue" type="hidden" name ='issueTypeFilter' list="issueType"></td> 
                                <select id="issueType">
                                    <option value="Vandalism"> Vandalism </option>
                                    <option value="Noise Pollution">Noise Pollution</option>
                                    <option value="Litter">Litter</option>
                                    <option value="Speeding">Speeding</option>
                                    <option value="Potholes">Potholes</option>
                                    <option value="Other">Other</option>
                                </select>
                            </dd>
                            <!--<dd>by Location</dd>-->
                            <dd>    <input placeholder="Location" type="text">  </dd>
                            <!--<dd>by Status</dd>-->
                            <dd>    <input placeholder="Status" type="text">    </dd>
                            <dd>
                                <form action="/issues" method="post">
                                    <p><input type="submit" name="filter" value="Filter"></p>
                                </form>
                            </dd>
                        </dt>
                    </section>
                </table>
                {{#if user}}    
                    <table id="SubmitNew">
                        <tr>
                            <th id = "th">ID</th>
                            <th id = "th">Issue</th>
                            <th id = "th">Issue Description</th>
                            <th id = "th">Raised by</th>
                            <th id = "th">Date Set</th>
                            <th id = "th">Date Completed</th>
                            <th id = "th">Location</th>
                            <th id = "th">Status</th>
                            <th id = "th">Votes</th>
                        </tr>
                        <form action="/issues" method="post">
                            <td id="td">ID</td>
                            <td id="td">
                                <select id="issueType" name='issueType' list="issueType">
                                    <option value="Vandalism">Vandalism </option>
                                    <option value="Noise Pollution">Noise pollution </option>
                                    <option value="Litter">Litter</option>
                                    <option value="Speeding">Speeding</option>
                                    <option value="Potholes">Potholes</option>
                                    <option value="Other">Other</option>
                                </select>
                            </td>

                            <td id="td"><input name='issueDesc' type="text"></td>
                            <td id="td">User: <br><b>{{user}}</b></td>
                                <!--<td id="td"><input type="text" placeholder="{{user}}" readonly></td>-->
                            <td id="td"><input type="date" readonly></td>
                            <td id="td"><input name = 'dateCompleted' type="date" placeholder="N/A" readonly></td>
                            <td id="td"><input name ='location' list="location" value = {{this.currentLocation}}></td> 
                                <datalist id="location">
                                    <option value="Bablake">
                                    <option value="Binley and Willenhall">
                                    <option value="Lower Stoke">
                                    <option value="Cheylesmore">
                                    <option value="Foleshill">
                                    <option value="Sherbourne">
                                    <option value="Whoberley">
                                    <option value="Longford">
                                    <option value="Henley">
                                    <option value="Wyken">
                                    <option value="Upper Stoke">
                                    <option value="Earlsdon">
                                    <option value="Wainbody">
                                    <option value="Westwood">
                                    <option value="Woodlands">
                                    <option value="Holbrook">
                                </datalist>
                            <!--
                            <td id="td"><select name='status' list="status" placeholder="incomplete" readonly> Incomplete </td>
                            -->
                            <td id="td"><input type='text' name = 'status' placeholder='incomplete' value='incomplete' readonly></td>
                            <td id="td"><input name='votes' type='text' placeholder=0 readonly></td>
                            <td><input type="submit" value="Submit" name = "submitIssueButton"></td>
                        </form>
                    </table>
                {{else}}
                    <p>Log In to submit an issue.</p>
                {{/if}}
            </section>
        </article>    
	</body>


</html>
